includeOptions =  `root-config --libs` `root-config --glibs` -I`root-config --incdir` -I./../include
obj:
	mkdir ./../obj
	gcc -c -fPIC $(includeOptions) FitCint.cc 				-o ./../obj/FitCint.o
	gcc -c -fPIC $(includeOptions) LHCOpticsApproximator.cc -o ./../obj/LHCOpticsApproximator.o

pathToRootLibraries = ../../../../root_libs
shared: obj
	
	gcc -shared $(includeOptions) ./../obj/LHCOpticsApproximator.o ./../obj/FitCint.o -o $(pathToRootLibraries)/LHCOpticsApproximator.so
	rootcint -f $(pathToRootLibraries)/FitCint.cxx -c $(includeOptions) ../include/FitCintLinkDef.h

# to remove, use only to specify path to file.so generated by shared
export:
	export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/rafalmucha/Pobrane/optic/optics_generator_python/root_libs

clean:
	rm -rf ./../obj
	rm -rf $(pathToRootLibraries)

k:	clean
	mkdir $(pathToRootLibraries)
	rootcint -f ./FitCint.cc -c ../include/LHCOpticsApproximator.h ../include/FitCintLinkDef.h
	mv ./FitCint_rdict.pcm $(pathToRootLibraries)
	rootcint -f $(pathToRootLibraries)/LHCOpticsApproximator.cxx -c ../include/LHCOpticsApproximator.h ../include/FitCintLinkDef.h
	rm $(pathToRootLibraries)/LHCOpticsApproximator.cxx* 
