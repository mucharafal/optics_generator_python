includeOptions =  `root-config --libs` `root-config --glibs` -I`root-config --incdir` -I./include
obj:
	mkdir obj
	gcc -c -fPIC $(includeOptions) src/TNtupleDcorr.cc  		-o obj/TNtupleDcorr.o
	gcc -c -fPIC $(includeOptions) src/FitCint.cc 				-o obj/FitCint.o
	gcc -c -fPIC $(includeOptions) src/LHCOpticsApproximator.cc -o obj/LHCOpticsApproximator.o
	gcc -c -fPIC $(includeOptions) src/TMultiDimFet.cc			-o obj/TMultiDimFet.o

pathToRootLibraries = ./../../root_libs
shared: obj
	mkdir $(pathToRootLibraries)
	gcc -shared $(includeOptions) obj/TMultiDimFet.o obj/LHCOpticsApproximator.o obj/FitCint.o obj/TNtupleDcorr.o -o $(pathToRootLibraries)/LHCOpticsApproximator.so
	rootcint -f $(pathToRootLibraries)/FitCint.cxx -c $(includeOptions) ./include/FitCintLinkDef.h

# to remove, use only to specify path to file.so generated by shared
export:
	export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/rafalmucha/Pobrane/optic/optics_generator_python/root_libs

clean:
	rm -rf obj
	rm -rf $(pathToRootLibraries)

k:
	rootcint -f $(pathToRootLibraries)/FitCint.cxx -c ./include/LHCOpticsApproximator.h ./include/TNtupleDcorr.h ./include/FitCintLinkDef.h
	rootcint -f $(pathToRootLibraries)/LHCOpticsApproximator.cxx -c ./include/LHCOpticsApproximator.h ./include/TNtupleDcorr.h ./include/FitCintLinkDef.h
	rm $(pathToRootLibraries)/FitCint.cxx* $(pathToRootLibraries)/LHCOpticsApproximator.cxx* 